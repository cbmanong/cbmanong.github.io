<!DOCTYPE html>
<html>

<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="" />

<link rel="shortcut icon" href="">


<title> dubbo</title>


<link rel="stylesheet" href="/css/bulma.css">
<link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/base.css">

<body>

  <style media="screen">
hr {
  height: 1px;
    background-color: black;
    margin-top: 0px;
    border: none;
    margin-bottom: 0px;
}
.black {


background-color: hsl(0,0%,7%);;


}
 #shadow {
  text-shadow: 2px 3px 3px white;
  margin-top: 3px;
}
h1 {
  text-shadow: 2px 3px 3px black;
 }
.menu {
margin-top: -80px;




}
#nav {
  margin-left: 2px;
  margin-right: 2px;
}
  #banner {
    position: relative;

  }
</style>
<header>

  <section class="section black is-medium" id="banner">
    <div class="container">
      <h1 id="sitetitle" class="title is-3 has-text-white-bis has-text-centered is-capitalized has-text-weight-bold">
        
        Hexo
      </h1>

      <h2 id="shadow" class="subtitle is-4 has-text-white is-capitalized has-text-centered">

      </h2>

    </div>

    </div>
  </section>
<!--TOP Menu-->
  <div class="menu level" >
<div class="level-item has-text-centered"></div>
    <nav class=".navbar level-item" >
      
        <a style="text-shadow: 2px 2px 3px grey" id="nav" class="button is-text is-outlined is-primary " href="


            /
            "> Home</a>
        
        <a style="text-shadow: 2px 2px 3px grey" id="nav" class="button is-text is-outlined is-primary " href="


            mailto:cbmnanqing@163.com
            "> Email</a>
        
        <a style="text-shadow: 2px 2px 3px grey" id="nav" class="button is-text is-outlined is-primary " href="


            https://github.com/cbmanong/
            "> Project</a>
        
        <a style="text-shadow: 2px 2px 3px grey" id="nav" class="button is-text is-outlined is-primary " href="


            /archives
            "> Archive</a>
        
        <a style="text-shadow: 2px 2px 3px grey" id="nav" class="button is-text is-outlined is-primary " href="


            /about
            "> About</a>
        
    </nav>
    <div class="level-item has-text-centered"></div>
</div>

  <hr>






</header>



<link rel="stylesheet" href="/css/highlight.css">
<style>
    .markdown-body {
        box-sizing: border-box;
        min-width: 200px;
        max-width: 960px;
        margin: 0 auto;
        padding: 45px;
    }

    @media (max-width: 767px) {
        .markdown-body {
            padding: 15px;
        }
    }
    #postsec {
        clear: left;
    }



    .details {
        float: left;
        padding-left: 10px;
        font-size: 18px;

    }
    div > span {
       margin-left: 0px;
      margin-top: 0px;
    }
</style>
<section id="post_section" class="container markdown-body" >

    <!--title,date,tags-->
    <h2 id="hidden">
        dubbo
    </h2>

    <section class="desec">

        
    </section>


    <!-- content -->
    <section id="postsec"><h3 id="1-关于Dubbo"><a href="#1-关于Dubbo" class="headerlink" title="1.关于Dubbo"></a>1.关于Dubbo</h3><p><img src="http://orulqrhz4.bkt.clouddn.com/blog/180120/EJcEH80iEb.png?imageslim" alt="mark"></p>
<blockquote>
<p><a id="more"></a>什么是soa服务？<br>在我们的电商项目中，就是利用了soa服务，将整个网站进行拆分，分离出订单中心、用户中心、库存中心等多个服务，服务之间通过定义的接口进行联系；</p>
<p>dubbo特点：</p>
<p>就是按照分层的方式来架构，使用这种方式可以使各个层之间解耦合(或者最大限度地松耦合)。从服务模型的角度来看，Dubbo采用的是一种非常简单的模型，要么是提供方提供服务，要么是消费方消费服务，所以基于这一点可以抽象出服务提供方（Provider）和服务消费方（Consumer）两个角色。关于注册中心、协议支持、服务监控等内容。</p>
</blockquote>
<h3 id="2-什么是RPC？"><a href="#2-什么是RPC？" class="headerlink" title="2.什么是RPC？"></a>2.什么是RPC？</h3><p><img src="http://orulqrhz4.bkt.clouddn.com/blog/180120/H57elLJLCc.png?imageslim" alt="mark"></p>
<h3 id="3-Dubbo的作用"><a href="#3-Dubbo的作用" class="headerlink" title="3.Dubbo的作用"></a>3.Dubbo的作用</h3><p><img src="http://orulqrhz4.bkt.clouddn.com/blog/180120/2GgfICI2Em.png?imageslim" alt="mark"></p>
<h3 id="4-Dubbo的应用场景"><a href="#4-Dubbo的应用场景" class="headerlink" title="4.Dubbo的应用场景"></a>4.Dubbo的应用场景</h3><p>我们知道当用户量很大时，请求频繁的情况下，如用户访问我们的网站服务，请求数量很大，请求连接数有限，此时使用短连接比较合适；当请求连接数不多，但是请求非常频繁的时候，如系统间访问，此时使用长连接，在一次连接中完成尽可能多的数据交互，效率更高，而系统的调用在分布式系统中，十分的常见。此时使用RPC非常合适，RPC的底层协议，大部分都是长连接，减少了建立和销毁连接的次数，大大提高了程序的访问效率，但是会导致连接长期被占用问题。</p>
<h3 id="5-Dubbo的架构"><a href="#5-Dubbo的架构" class="headerlink" title="5.Dubbo的架构"></a>5.Dubbo的架构</h3><ul>
<li>架构图</li>
</ul>
<p><img src="http://orulqrhz4.bkt.clouddn.com/blog/180120/16fiJkbFjG.png?imageslim" alt="mark"></p>
<p>节点角色说明：</p>
<p>1)<em>Provider(提供者)</em>:暴露服务的服务提供方；</p>
<p>2)<em>Consumer(消费者)</em>:调用远程服务的服务消费方</p>
<p>3)<em>Registry(注册中心)</em>:服务注册与发现的注册中心，推荐zookeeper</p>
<p>4)<em>Monitor(监控中心)</em>:统计服务的调用次调和调用时间的监控中心;</p>
<p>5)Container:服务运行容器，官方不推荐使用Tomcat容器</p>
<p><img src="http://orulqrhz4.bkt.clouddn.com/blog/180121/96HEDAcHG5.png?imageslim" alt="mark"></p>
<p>调用关系说明： </p>
<p>1)服务容器负责启动，加载，运行服务提供者；</p>
<p>2)服务提供者在启动时，向注册中心注册自己提供的服务；</p>
<p>3)服务消费者在启动时，向注册中心订阅自己所需的服务；</p>
<p>4)注册中心返回服务提供者地址列表给消费者，如果有变更，注册中心将基于长连接推送变更数据给消费者；</p>
<p>5)服务消费者，从提供者地址列表中，基于软负载均衡算法，选一台提供者进行调用，如果调用失败，则再选另一台调用；</p>
<p>6)服务消费者和提供者，在内存中累计调用次数和调用时间，定时每分钟发送一次统计数据到监控中心。</p>
<p>详解：</p>
<ul>
<li>对于服务的提供者server</li>
</ul>
<blockquote>
<p>真正提供服务的机器，每个server启动时，主动与注册中心建立Scoket长连接，并将自己的ip，提供服务的名称，端口等信息直接发送给注册中心，注册中心就会收集到每个server提供的服务的信息</p>
</blockquote>
<p>优点：</p>
<p>1)只要client和server启动的时候，注册中心ConfigServer是好的，服务就可以调用了，如果后面configserver挂了，那只影响configserver挂了以后服务提供者有变化，而client还无法感知这一变化；</p>
<p>2)<code>client每次调用服务是不经过configserver的，只是与它建立联系，从它那里获取服务提供者列表而已；</code></p>
<p>3)调用服务-负载均衡：client调用服务时，可以根据规则在多个服务提供者之间轮流调用服务；</p>
<p>4)服务提供者-容灾：某一个server挂了，client依然是可以正确的调用服务的，但前提是这个扶着有至少有2个服务提供者，而对于client能很快的感知到服务提供者的变化，并作出相应反应；</p>
<p>5)服务提供者-扩展：添加一个服务提供者很容易，而且client会很快的感知到它的存在并使用它。</p>
<ul>
<li>对于服务的消费者client</li>
</ul>
<blockquote>
<p>调用服务的机器，每个client启动时，主动与注册中心建立socket长连接，并将自己的ip等信息发送给注册中心。client在使用服务的时候会根据服务名称去注册中心中获取提供者信息(而注册中心就知道某个服务是当前哪几个client在使用)，client拿到这些服务提供者信息后，与它们建立连接，就可以直接调用服务了。当有多个服务提供者的时候，client根据一定规则来进行负载均衡，如轮循，随机，按权重等。</p>
<p>注意：一旦client使用的服务对应的服务提供者有变化时(如服务提供者有新增、删除等情况)，注册中心就会将最新的服务提供者列表推送给client，client就会根据最新的服务提供者列表重新建立连接，新增的提供者建立连接，删除的提供者丢弃连接。</p>
</blockquote>
<p>常见问题</p>
<p>1)dubbo中zookeeper做注册中心，如果注册中心集群都挂掉，发布者和订阅者之间还能通信吗？</p>
<blockquote>
<p> 可以通信，启动dubbo时，消费者会从zookeeper中拉取注册的生产者的地址接口等数据，缓存在本地，每次调用时，按照本地存储的地址进行调用。</p>
</blockquote>
<p><img src="http://orulqrhz4.bkt.clouddn.com/blog/180120/CJm3LE9hLi.png?imageslim" alt="mark"></p>
<p>2)dubbo在安全机制方面是如何解决的？</p>
<p>dubbo通过token令牌防止用户绕过注册中心直连，然后在注册中心上管理授权，dubbo还提供服务黑白名单，来控制服务所允许的调用方。</p>
<p>3)dubbo连接注册中心和直连的区别</p>
<p>在开发及测试环境下，经常需要绕过注册中心，只测试指定服务提供者，这时候可能需要点对点直连， 点对点直联方式，将以服务接口为单位，忽略注册中心的提供者列表</p>

    </section>


</section>
<script>var title = document.getElementById("hidden");
    title.style.display = "none";
    sitetitle = document.getElementById("sitetitle");
    titlev = title.childNodes[0].nodeValue;
    sitetitle.innerHTML = titlev;
    shadow = document.getElementById("shadow");
    shadow.style.visibility = "hidden";
</script>
<!-- 评论系统-->





<style>
    #height {
        height: 100px;
        box-sizing: border-box;
        color: rgb(51, 51, 51);
        font-size: 18px;
        font-weight: 400;

    }

    .footer_p {
        box-sizing: border-box;
        font-size: 18px;
        font-weight: 200;
        line-height: 27px;
        text-align: center;
        text-rendering: optimizelegibility;
    }

    .footer_link {
        color: black;
    }
</style>
<footer class="footer" id="height">

    <div class="container">
        <div class="content has-text-centered ">
            <p class="footer_p">
                Theme By<a href="https://github.com/cbmanong/" class="footer_link
"> Cbmn.</a>
            
               
               
            </p>
        </div>
        <div class="content has-text-centered">
            <p class="footer_p">Powered By <a href="https://hexo.io/" class="footer_link
"> Hexo.</a></p>
        </div>
    </div>

</footer>

<script src="/js/jquery.js"></script>

<!-- 特效 -->
<script type="text/javascript" color="#555" opacity='0.9' zIndex="-1" count="100"
src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js">

</script>
<script src="/js/highlight.pack.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", function(event) {
        var codeBlocks = Array.prototype.slice.call(document.getElementsByTagName('pre'))
        codeBlocks.forEach(function(block, index) {
            hljs.highlightBlock(block);
        });
    });
</script>

</body>
